# 									高并发的秒杀系统

# 1.背景

秒杀作为一种常用促销手段，在电商行业广泛使用，特别是每年的618，双11，众多厂家推出层出不穷的玩法。秒杀业务会让系统瞬时出现极高的并发量，同时秒杀的活动规则的也是花样百出，如果与业务深度耦合，就不能使用市场的快速发展。



# 2.需求设计



- 满足秒杀业务的高并发需求
- 具备耦合性低，高可用、维护性高的通用性秒杀系统



# 3.总体方案

![image-20210128005440547](C:\Users\Johar\AppData\Roaming\Typora\typora-user-images\image-20210128005440547.png)



由于秒杀业务本身的高并发特性，为了减少秒杀活动前几分钟对平台的压力，可以将秒杀商品页面的静态资源推送到CDN服务器，用户请求由CDN直接响应，不必达到后端服务器。

参与秒杀活动的商品一般数量较少，只能有少量用户可以抢购。因此在负载均衡层，通过应用防火墙进行流量控制，当下单请求超过阈值后，熔断下单接口。

对于被应用防火墙放行的请求，落到web服务器，进行处理。考虑到下单主要是写操作，数据库性能抗不住，活动前将商品预热分配到KV集群上，KV数据定时同步到DB中。



# 4.方案分解







# 5.风险







# 6.协议







# 7.修订记录



| 序号 | 时间      | 修改人 | 修改内容 |
| ---- | --------- | ------ | -------- |
| 1    | 2021-1-27 | Johar  | 创建     |
|      |           |        |          |
|      |           |        |          |
|      |           |        |          |
|      |           |        |          |
|      |           |        |          |
|      |           |        |          |
|      |           |        |          |
|      |           |        |          |



















